# Build stage
FROM node:20-alpine AS build

WORKDIR /app

COPY frontend/package*.json ./
RUN npm ci --omit=dev || npm install

COPY frontend/ ./
RUN npm run build

# Serve built assets with nginx
FROM nginx:alpine

# Copy built assets
COPY --from=build /app/dist /usr/share/nginx/html

# Basic nginx config for static frontend in this container
# (main reverse proxy is handled by the top-level nginx service)

EXPOSE 80
